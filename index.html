<!DOCTYPE html>

<head lang="es-AR">
	<title>CuÃ¡ndo se libera Andy???</title>
	<style>
		body {
			margin: 0;
			padding: 1em;
			height: 100vh;
			overflow: hidden;
			background-color: black;
			color: white;
			font-size: xxx-large;
			font-family: monospace, sans-serif;
			text-align: center;
		}

		.yay {
			color: green;
		}

		.boo {
			color: red;
		}
	</style>
	<script>
		const msInADay = 24 * 60 * 60 * 1000;
		const shiftLength = 4 * msInADay;
		const startDate = new Date(2024, 0, 2, 18, 0, 0);

		function pad(value) {
			return value.toString().padStart(2, '0');
		}

		function updateCountdown() {
			const now = new Date();
			const elapsed = now - startDate;
			const cycleTime = elapsed % (shiftLength * 2);

			let targetDate, statusMessage;
			if (cycleTime < shiftLength) {
				targetDate = new Date(now.getTime() + (shiftLength - cycleTime));
				const days = Math.floor((targetDate - now) / msInADay);
				const name = targetDate.toLocaleDateString('es-AR', {weekday: 'long'})
				statusMessage = `${days} dÃ­as hasta que se libere Andy ðŸ˜” (el ${name})`
				className = 'boo';
			} else {
				targetDate = new Date(now.getTime() + (2 * shiftLength - cycleTime));
				const days = Math.floor((targetDate - now) / msInADay);
				const name = targetDate.toLocaleDateString('es-AR', {weekday: 'long'})
				statusMessage = `Andy estÃ¡ libre! ðŸ˜„<br>(${days} dÃ­as hasta que nos abandone ðŸ˜”, el ${name})`
				className = 'yay';
			}

			const remainingTime = targetDate - now;
			const days = Math.floor(remainingTime / msInADay);
			const hours = Math.floor((remainingTime % msInADay) / (60 * 60 * 1000));
			const minutes = Math.floor((remainingTime % (60 * 60 * 1000)) / (60 * 1000));
			const seconds = Math.floor((remainingTime % (60 * 1000)) / 1000);

			document.getElementById('date').innerHTML =
				`Hoy es ${now.toLocaleDateString('es-AR', {dateStyle: 'full'})}`;
			document.getElementById('message').className = className;
			document.getElementById('status').innerHTML = statusMessage;
			document.getElementById('counter').innerHTML =
				`${pad(days)}:${pad(hours)}:${pad(minutes)}:${pad(seconds)}`;
		}

		window.onload = updateCountdown;
		setInterval(updateCountdown, 1000);
	</script>
</head>

<body>
	<p id="date"></p>
	<span id="message">
		<p id="status"></p>
		<p id="counter"></p>
	</span>
</body>